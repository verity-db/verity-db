#:schema https://dystroy.org/bacon/.bacon.schema.json

# Craton bacon configuration
# Run from project root for main crate development
# For website development, run bacon from website/ directory

default_job = "check"
env.CARGO_TERM_COLOR = "always"

# Catppuccin Mocha Dark Theme
[skin]
status_bg = 235
status_fg = 189
key_fg = 147
status_key_fg = 147
project_name_badge_fg = 235
project_name_badge_bg = 183
error_fg = 210
warning_fg = 222
info_fg = 117
success_fg = 120
table_fg = 189
scrollbar_fg = 238
scrollbar_bg = 235

[jobs.check]
command = ["cargo", "check", "--workspace"]
need_stdout = false

[jobs.check-all]
command = ["cargo", "check", "--workspace", "--all-targets"]
need_stdout = false

[jobs.clippy]
command = ["cargo", "clippy", "--workspace"]
need_stdout = false

[jobs.clippy-all]
command = ["cargo", "clippy", "--workspace", "--all-targets"]
need_stdout = false

[jobs.pedantic]
command = ["cargo", "clippy", "--workspace", "--", "-W", "clippy::pedantic"]
need_stdout = false

[jobs.test]
command = [
    "cargo", "nextest", "run",
    "--workspace",
    "--no-fail-fast",
    "--hide-progress-bar",
    "--failure-output", "final",
]
need_stdout = true
analyzer = "nextest"

[jobs.test-pkg]
command = ["cargo", "nextest", "run", "-p"]
need_stdout = true
analyzer = "nextest"

[jobs.doc]
command = ["cargo", "doc", "--workspace", "--no-deps"]
need_stdout = false

[jobs.doc-open]
command = ["cargo", "doc", "--workspace", "--no-deps", "--open"]
need_stdout = false
on_success = "back"

[keybindings]
c = "job:check"
a = "job:check-all"
l = "job:clippy"
p = "job:pedantic"
t = "job:test"
d = "job:doc"
