#:schema https://dystroy.org/bacon/.bacon.schema.json

# VerityDB Website bacon configuration
# Run from website/ directory: cd website && bacon

default_job = "run"
env.CARGO_TERM_COLOR = "always"

# Catppuccin Mocha Dark Theme
[skin]
status_bg = 235
status_fg = 189
key_fg = 147
status_key_fg = 147
project_name_badge_fg = 235
project_name_badge_bg = 183
error_fg = 210
warning_fg = 222
info_fg = 117
success_fg = 120
table_fg = 189
scrollbar_fg = 238
scrollbar_bg = 235

# Run the site server (restarts on code/template changes)
[jobs.run]
command = ["cargo", "run"]
watch = ["crates", "templates", "content"]
need_stdout = true
allow_warnings = true
background = false
on_change_strategy = "kill_then_restart"

[jobs.check]
command = ["cargo", "check"]
need_stdout = false

[jobs.clippy]
command = ["cargo", "clippy"]
need_stdout = false

[jobs.test]
command = ["cargo", "nextest", "run"]
need_stdout = true
analyzer = "nextest"

[keybindings]
r = "job:run"
c = "job:check"
l = "job:clippy"
t = "job:test"
