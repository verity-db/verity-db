[workspace]
resolver = "2"
members = [
  "crates/vdb",
  "crates/vdb-types",
  "crates/vdb-wire",
  "crates/vdb-kernel",
  "crates/vdb-vsr",
  "crates/vdb-storage",
  "crates/vdb-directory",
  "crates/vdb-projections",
  "crates/vdb-runtime",
  "crates/vdb-server",
  "crates/vdb-client",
  "crates/vdb-admin",
]
default-members = ["crates/vdb"]


[workspace.package]
version = "0.1.0"
edition = "2024"
license = "MIT OR Apache-2.0"
repository = "https://github.com/yourusername/veritydb"

[workspace.dependencies]
# Core
anyhow = "1"
thiserror = "2.0.17"
bytes = { version = "1", features = ["serde"] }
tokio = { version = "1", features = ["full"] }
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }
async-trait = "0.1"
futures = "0.3"

# Cap'n Proto
capnp = "0.25.0"
capnp-rpc = "0.25.0"
capnpc = "0.25.0"

# SQLite with SQLCipher via sqlx
sqlx = { version = "0.9.0-alpha", features = [
  "runtime-tokio",
  "sqlite",
  "tls-rustls",
  "sqlite-bundled",
  "sqlx-toml",
  "time",
] }
# SQLCipher encryption - overrides sqlx's default SQLite
libsqlite3-sys = { version = "0.30", features = ["bundled-sqlcipher"] }

# Utilities
uuid = { version = "1", features = ["v4", "serde"] }
time = { version = "0.3", features = ["serde"] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"
tokio-util = { version = "0.7", features = ["compat"] }

# Testing
proptest = "1"
test-case = "3"
tokio-test = "0.4"
tempfile = "3"

# Internal crates
vdb = { path = "crates/vdb" }
vdb-types = { path = "crates/vdb-types" }
vdb-wire = { path = "crates/vdb-wire" }
vdb-kernel = { path = "crates/vdb-kernel" }
vdb-vsr = { path = "crates/vdb-vsr" }
vdb-storage = { path = "crates/vdb-storage" }
vdb-directory = { path = "crates/vdb-directory" }
vdb-projections = { path = "crates/vdb-projections" }
vdb-runtime = { path = "crates/vdb-runtime" }
vdb-server = { path = "crates/vdb-server" }
vdb-client = { path = "crates/vdb-client" }
vdb-admin = { path = "crates/vdb-admin" }
